---
layout: post
title: "图形技术让支付宝有温度"
author: "燕良"
categories: product
tags: [engine, r3, alipay]
image:
  feature: 2017-antfarm.jpg
  credit: Alipay
  creditlink: ""
---

从AR红包到蚂蚁庄园，我来讲讲我在蚂蚁金服这一年多都经历了什么。:-)

### 一切从AR红包开始

话说2016年11月，我有幸加入了蚂蚁金服体验技术部，老板就是前端领域赫赫有名的“玉伯”。我刚入职没多久，就被拉近了当时高度保密的AR实景红包项目。当时都时间是非常进展的，大概1周的时间就要完成“红包君”角色模型、动画的渲染。时间紧任务重啊，于是首先就是翻一下自己肚子里的存货，然后我惭愧的发现虽然专业开发3D引擎16年，竟然一时没有合适的引擎可用。我拿大家熟悉的游戏引擎，典型的Unity3D引擎和项目的需求做一个对比，你就清楚了。  

| Unity3D引擎  | 项目需求  |
| :------    |  :----- | 
|打包成独立的App  | 嵌入超级App中，作为一个View中的一部分  |
|容量占用大，Runtime就有14M | 严格的容量要求，代码+内容需要控制在几百K |
|渲染效果好，但对手机配置有要求 | 机型适配要求极高，要覆盖1亿+用户机型  |
|支持物理引擎、AI等丰富功能     | 只需要交互图形的核心功能 |

所以，这是一个与游戏开发完全不同的领域。也是从这个项目中汲取的经验促使我们做出了一个重要的决定：开发一个适合运行在超级App之中的3D渲染引擎，于是R3诞生了！

### R3：运作超级App中的3D引擎

R3引擎是一个基于WebGL的、基于现代OO设计思想的3D渲染引擎。

R3支持glTF标准。

### 蚂蚁庄园·星星球的挑战

“蚂蚁庄园”是支付宝中继“蚂蚁森林”之后的又一个成功的公益性质的游戏项目。蚂蚁森林中的星星球玩法是R3引擎的第一个大规模应用的产品。

### AntG：蚂蚁的图形技术平台

R3引擎是一个Runtime库，是基础，我们不会止步于此。我们的初心是“让互动图形技术信手拈来”，降低互动图形技术的开发门槛，提高开发效率，还有很多工作要做。